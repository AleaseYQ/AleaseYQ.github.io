---
layout: post
title: malloc 函数的使用
categories: c语言入门学习
description: malloc 的用法，可变数组的构造
keyword: c语言， malloc
---

# malloc函数

malloc 是包含在 stdlib.h 里的一个库函数，由于这里是c语言基础，于是只会说一说其一种用法。（其实就是不会，这个博主就是屑啦。）

可知我们通常情况下初始化完一个数组后其元素个数是固定的（c99中似乎[]内可以是变量），但是通过 malloc 既动态内存分布可以构造一个可变数组（可变是指在初始化变量后再构造数组），其原理是 malloc 让计算机腾出一块空间来，然后你就可以随便用了（好吧，不是随便）。下面就来看看怎么来实现这些吧。

首先你得理解什么是指针变量---其实就是存放某个变量的地址的变量，我们可以通过指针变量来间接访问它所指向的变量。然后。。。嗯。。就开始构造吧。(这里构造一个一维int类型数组为例)

```c
#include <stdlib.h>
int main(void)
{
    int n,i;
    int *arr//构造一个指针变量
    scanf("%d"，&n);
    arr=(int*)malloc(sizeof(int)*n);//分配内存，malloc回归值为void*所以要类型转换
    for(i=1;i<n;i++)
    {
        scanf("%d",&a[i]);//这里就把arr当作数组用，注意arr是一个指针，它储存着分配的内存的地址,而a[i]为这块内存中的一小块的名字。
    }
    free(arr)//用完malloc后要记得把内存释放,free(地址)就是来干这个的
    return 0;
}
```

嗯，大概过程就是这样。（觉得不严谨吗。。。放过孩子吧，我才学习入门c啊。欢迎纠错，不过要等我把评论版块搞好再说）